speclists:
  serial:
    definitions:
    - all:
      - $openssl
      - $libraries
      - $libraries_specific
      - $tools
      - $tools_specific
#     - $profilers
    
  serial_threadsafe:
    definitions:
    - all:
      - $openssl
      - $libraries
      - $libraries_specific
      - $tools
      - $tools_specific
    
  mpi:
    definitions:
    - all:
      - $openssl
      - $libraries
      - $libraries_specific
      - $libraries_petsc
      - $benchmarks

  mpi_bench:
    definitions:
    - all:
      - $openssl
      - $libraries_specific
      - $benchmarks
      - $benchmarks_libraries

serial:
  spack:
    definitions:
    - current_compiler:
      - '{{env000_bootstrap.config.current_compiler}}'
    - openssl:
      - '{{env000_bootstrap.config.system_openssl}}'

    - libraries:
      - zlib
      - boost 
      - hdf5 +cxx -mpi
      - metis
      - netcdf-c -mpi
      - netcdf-fortran
      - libszip
      - cgal
      - libmatheval


    - profilers:
      - hpctoolkit    #seems that hpctoolkit currently require xz static (+pic and is incompatible with current latest version, to resolve, upgrade xz to latest
                      # https://github.com/spack/spack/commit/e9173a59fdfe6bd48120283ea324a5d42cb9e563 and https://github.com/spack/spack/commit/57d6b7022649cf15558bf2a977c077cf31114bb7
#     - tau+python    #it seems that tau requires an older python

    - tools:
      - proj
      - gdal +python
      - gmt +ffmpeg +gdal   ^json-c +ipo
#X11      - grads
##X11      - gnuplot
##binary only and proprietary    - gurobi
##X11    - ncview 
##X11    - grass +blas +lapack  +geos + gdal +zstd 


serial_threadsafe:
  spack:
    definitions:
    - current_compiler:
      - '{{env000_bootstrap.config.current_compiler}}'
    - openssl:
      - '{{env000_bootstrap.config.system_openssl}}'

    - libraries:
      - hdf5  +threadsafe -mpi

    - tools:
      - eccodes +fortran+openmp+netcdf


mpi:
  libraries_petsc_normal:
  - petsc +mpi +mumps +scalapack +fftw

  libraries_petsc_nocuda:
  - petsc +mpi +mumps +scalapack +fftw ~cuda ^hypre ~cuda 

  benchmarks_libraries:
  - py-mpi4py

  benchmarks_normal:
  - osu-micro-benchmarks

  spack:
    definitions:
    - current_compiler: '@REF{env000_bootstrap.spack.definitions.current_compiler}'
    - openssl:
      - '{{env000_bootstrap.config.system_openssl}}'

    - libraries:
      - adios
      - boost +mpi
      - hdf5  +hl
      - netcdf-c +mpi +parallel-netcdf
      - netcdf-fortran
      - parallel-netcdf
      - parmetis
      - py-mpi4py
      - cgal

    - benchmarks: '@REF{mpi.benchmarks_normal}'

