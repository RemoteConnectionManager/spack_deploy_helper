mpi_intel:
  substitutions:
    init_command: 'spack-python {{DEPLOY_ROOTPATH}}/scripts/select_spec.py --loglevel debug --compiler intel --external openssl --tplfile null_tpl.yaml'

  spack:
    definitions:

    - libraries_specific:
      - intel-oneapi-mpi
      - intel-oneapi-mkl
      - libfabric@1.9.1 fabrics=psm2

    - all:  '@REF{speclists.mpi.definitions.all}'

mpi_bench_intel:
  substitutions:
    init_command: '@REF{mpi_intel.substitutions.init_command}'

  spack:
    definitions:
    - libraries_specific: '@REF{mpi_intel.spack.definitions.libraries_specific}'

    - all:  '@REF{speclists.mpi_bench.definitions.all}'

serial_intel:
  substitutions:
    init_command: 'spack-python {{DEPLOY_ROOTPATH}}/scripts/select_spec.py --loglevel debug --compiler intel --external openssl --tplfile null_tpl.yaml'

  spack:
    definitions:

    - libraries_specific:
      - intel-oneapi-mkl

    - tools_specific: []

    - all:  '@REF{speclists.serial.definitions.all}'

mpi_gcc:
  substitutions:
    init_command: 'spack-python {{DEPLOY_ROOTPATH}}/scripts/select_spec.py --loglevel debug --compiler gcc --external openssl --tplfile null_tpl.yaml'

  spack:
    definitions:

    - libraries_specific:
      - openmpi
      - netlib-scalapack
      - netlib-lapack
      - fftw

    - all:  '@REF{speclists.mpi.definitions.all}'


mpi_bench_gcc:
  substitutions:
    init_command: '@REF{mpi_gcc.substitutions.init_command}'

  spack:
    definitions:
    - libraries_specific: '@REF{mpi_gcc.spack.definitions.libraries_specific}'

    - all:  '@REF{speclists.mpi_bench.definitions.all}'


serial_gcc:
  substitutions:
    init_command: 'spack-python {{DEPLOY_ROOTPATH}}/scripts/select_spec.py --loglevel debug --compiler gcc --external openssl --tplfile null_tpl.yaml'

  spack:
    definitions:

    - libraries_specific:
      - openblas
      - netlib-xblas
      - netlib-lapack

    - tools_specific:
      - cdo

    - all:  '@REF{speclists.serial.definitions.all}'


env_011_serial_gcc: '@REF{serial_gcc}'
env_011_serial_intel: '@REF{serial_intel}'
env_013_mpi_gcc_full: '@REF{mpi_gcc}'
env_013_mpi_intel_full: '@REF{mpi_intel}'
env_012_mpi_gcc_bench: '@REF{mpi_bench_gcc}'
env_012_mpi_intel_bench: '@REF{mpi_bench_intel}'
